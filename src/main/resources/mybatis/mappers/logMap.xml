<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
      PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.logMap">
	<insert id="recordIn" parameterType="logVO">
		 INSERT INTO alt.logged (b_type,l_room,p_name,l_type) VALUES (#{b_type},#{l_room},#{p_name},#{l_type})
	</insert>
	<select id="checkRecentN" parameterType="logVO" resultType="Integer">
		SELECT COUNT(*) FROM alt.logged WHERE  l_room = #{l_room}
	</select>
	<select id="checkRecent" parameterType="logVO" resultType="String">
		SELECT l_type FROM alt.logged WHERE l_room = #{l_room} ORDER BY l_id DESC LIMIT 1
	</select>
	<select id="checkTRecent" parameterType="logVO" resultType="logVO">
		SELECT l_createdat, l_id FROM alt.logged WHERE l_room = #{l_room} ORDER BY l_id DESC LIMIT 1
	</select>
	<update id="updateType" parameterType="int">
		UPDATE alt.logged SET l_type = "EXIT" WHERE l_id = #{l_id} 
	</update>
</mapper>